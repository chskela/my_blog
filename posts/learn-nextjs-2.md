---
title: "Изучаем Next.js - часть 2"
excerpt: "Next.js дает вам лучший экспирианс со всеми функциями, необходимыми для разработки: гибридный статический и серверный рендеринг, поддержка TypeScript, интеллектуальное связывание, предварительная выборка маршрута и многое другое."
category: "The React Framework"
tags: ["React", "JavaScript", "Guides"]
date: "2021-07-23"
url: "pexels-markus-spiske-965345.jpg"
author:
  name: Алексей Чистяков
  picture: "/assets/blog/authors/jj.jpeg"
isFeatured: false
isPicks: false
---

## Навигация между страницами

Пока что созданное нами приложение Next.js имеет только одну страницу. Веб-сайты и веб-приложения обычно имеют много разных страниц.

Давайте посмотрим, как добавить больше страниц в наше приложение.

### Страницы в Next.js

В Next.js страница - это React компонент, экспортированный из файла в [каталоге `pages`](https://nextjs.org/docs/basic-features/pages).

Страницы связаны с роутом на основе **имени файла**. Например:

- файл`pages/index.js` свящан с роутом `/`.
- файл`pages/posts/first-post.js` свящан с роутом `/posts/first-post`.

У нас уже есть файл `pages/index.js`, поэтому давайте создадим pages `/posts/first-post.js`, чтобы посмотреть, как он работает.

### Создание новой Страницы

Создайте каталог `posts` в каталоге `pages`.

Создайте файл с именем `first-post.js` внутри каталога `posts` со следующим содержимым:

```jsx
export default function FirstPost() {
  return <h1>First Post</h1>;
}
```

Компонент может иметь любое имя, но вы должны експортироватьего как `default` экспорт.

Теперь убедитесь, что сервер запущен, и посетите страницу [http://localhost:3000/posts/first-post](http://localhost:3000/posts/first-post). Вы должны увидеть страницу:

![Первый пост](first-post.png)

Вот как вы можете создавать разные страницы в Next.js.

Просто создайте файл JS в [каталоге `pages`](https://nextjs.org/docs/basic-features/pages), и путь к файлу станет URL-путем.

В некотором смысле это похоже на создание веб-сайтов с использованием файлов HTML или PHP. Вместо того, чтобы писать HTML, вы пишете JSX и используете компоненты React.

Давайте добавим ссылку на только что добавленную страницу, чтобы мы могли перейти к ней с домашней страницы.

### Компонент Link

При создании ссылок между страницами на веб-сайтах вы используете HTML-тег `<a>`. В Next.js вы используете компонент `Link` из [`next/link`](https://nextjs.org/docs/api-reference/next/link), чтобы обернуть тег `<a>`. `<Link>` позволяет выполнять переход на стороне клиента на другую страницу в приложении.

### Using `<Link>`

Сначала откройте `pages/index.js` и импортируйте компонент `Link` из [`next/link`](https://nextjs.org/docs/api-reference/next/link), добавив эту строку вверху:

```jsx
import Link from "next/link";
```

Затем найдите тег `h1`, который выглядит так:

```jsx
<h1 className="title">
  Learn <a href="https://nextjs.org">Next.js!</a>
</h1>
```

И измените его на:

```jsx
<h1 className="title">
  Read{" "}
  <Link href="/posts/first-post">
    <a>this page!</a>
  </Link>
</h1>
```

> `{' '}` добавляет пустое пространство, которое используется для разделения текста на несколько строк.

Затем откройте `pages/posts/first-post.js` и замените его содержимое следующим:

```jsx
import Link from "next/link";

export default function FirstPost() {
  return (
    <>
      <h1>First Post</h1>
      <h2>
        <Link href="/">
          <a>Back to home</a>
        </Link>
      </h2>
    </>
  );
}
```

Как видите, компонент `Link` аналогичен использованию тегов `<a>`, но вместо `<a href="…">` вы используете `<Link href = "…">` и помещаете внутри тег `<a>`.

Давайте проверим, работает ли это. Теперь у вас должна быть ссылка на каждой странице, позволяющая перемещаться вперед и назад:

![Links](links.gif)

### Client-Side навигация

Компонент [`Link`](https://nextjs.org/docs/api-reference/next/link) обеспечивает client-side навигацию между двумя страницами в одном приложении Next.js.

Client-side навигация означает, что переход страницы происходит с использованием JavaScript, который быстрее, чем навигация по умолчанию, выполняемая браузером.

Here’s a simple way you can verify it:

- Измените CSS свойство `background` с помощью инструментов разработчика браузера `<html>` на `yellow`.
- Щелкайте по ссылкам, чтобы переходить между двумя страницами.
- Вы увидите, что желтый фон сохраняется между переходами между страницами.

Это показывает, что браузер не загружает всю страницу и client-side навигация работает.

![Client-side navigation](client-side.gif)

Если вы использовали `<a href="…">` вместо `<Link href = "…">`, то цвет фона будет сбрасываться при нажатии на ссылку, поскольку браузер выполняет полное обновление.

### Разделение кода и предварительная выборка

Next.js выполняет разделение кода автоматически, поэтому каждая страница загружает только то, что необходимо для этой страницы. Это означает, что при отображении домашней страницы код для других страниц изначально не обслуживается.

Это гарантирует быструю загрузку домашней страницы, даже если у вас сотни страниц.

Загрузка только кода запрашиваемой страницы также означает, что страницы становятся изолированными. Если определенная страница выдает ошибку, остальная часть приложения все равно будет работать.

Кроме того, в production build Next.js всякий раз, когда компоненты [`Link`](https://nextjs.org/docs/api-reference/next/link) появляются в окне просмотра браузера, Next.js автоматически предварительно выбирает код для связанной страницы в фоновом режиме. К тому моменту, когда вы нажмете ссылку, код целевой страницы уже будет загружен в фоновом режиме, и переход между страницами будет практически мгновенным!

### Резюме

Next.js автоматически оптимизирует ваше приложение для достижения максимальной производительности за счет разделения кода, client-side навигации и предварительной выборки (в roduction).

Вы создаете маршруты в виде файлов в каталоге [`pages`](https://nextjs.org/docs/basic-features/pages) и используете встроенный компонент [`Link`](https://nextjs.org/docs/api-reference/next/link). Библиотеки маршрутизации не требуются.

Вы можете узнать больше о компоненте `Link` в справочнике по [API для `next/link`](https://nextjs.org/docs/api-reference/next/link) и о маршрутизации в целом в [документации по маршрутизации](https://nextjs.org/docs/routing/introduction).

> **Примечание.** Если вам нужно создать ссылку на внешнюю страницу вне приложения Next.js, просто используйте тег `<a>` без `Link`.

> Если вам нужно добавить такие атрибуты, как, например, `className`, добавьте его в тег `a`, а не в тег `Link`. [Вот пример.](https://github.com/vercel/next-learn-starter/blob/master/snippets/link-classname-example.js)
